<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Project 1 | CS 447</title>
<meta name="generator" content="Jekyll v3.7.4" />
<meta property="og:title" content="Project 1" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Introduction" />
<meta property="og:description" content="Introduction" />
<link rel="canonical" href="https://wilkie.github.io/cs447/projects/01/" />
<meta property="og:url" content="https://wilkie.github.io/cs447/projects/01/" />
<meta property="og:site_name" content="CS 447" />
<script type="application/ld+json">
{"@type":"WebPage","url":"https://wilkie.github.io/cs447/projects/01/","headline":"Project 1","description":"Introduction","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/cs447/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://wilkie.github.io/cs447/feed.xml" title="CS 447" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/cs447/">CS 447</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/cs447/about/">About</a><a class="page-link" href="/cs447/labs/">Labs</a><a class="page-link" href="/cs447/projects/">Projects</a><a class="page-link" href="/cs447/resources/">Resources</a><a class="page-link" href="/cs447/schedule/">Schedule</a><a class="page-link" href="/cs447/studyguide-exam-3/">Study guide for the final exam</a><a class="page-link" href="/cs447/studyguide-exam-3-solution/">Study guide solution for the final exam</a><a class="page-link" href="/cs447/syllabus/">Syllabus</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        
<h1>Project 1: Centi--- I mean Millipede Infraction Protection Simulator</h1>

<p>
<strong>Released</strong>: 11:59 PM Thursday, September 27th, 2018.
</p>


<p>
<strong>Due</strong>: <s>11:59 PM Sunday, October 28th, 2018.</s>
</p>

<p>
<strong>Extended</strong>: 11:59PM Sunday, November 4th, 2018.
</p>


<p>
We will create a nice interactive game based loosely on the hit arcade game Centipede.

</p>


<h2 id="introduction">Introduction</h2>

<p>Hello! Can yo—*static*—ee? Can you hear me? I’m contac*static* from the past!
I’m calling from the year 1981! Is this 2018? Is the future as great as we all expect it
to be? Hoverboards? World peace? Flying ca— What’s that you say? You’re breaking up…
2018 is a trash year?? No holographic video games… just cheap VR to feed people ads? Dang.</p>

<p>Well… maybe we can brighten up our future by looking at the relative simplicity of the
past. There’s this great game called Centipede by Ed Logg and Dona Bailey. It was originally
programmed by Dona Bailey, who, when she realized her mundane work involved the same type
of processor, and therefore the same assembly language, as games, went to work for Atari.</p>

<p><strong>Aside</strong>: Dona Bailey gives a short description of her inspriration and process for designing
the original Centipede <a href="http://www.gamasutra.com/view/news/105919/QA_How_Centipede_CoCreator_Bailey_Got_The_Bug.php">here</a>.</p>

<p>Hey! Who else knows some assembly? That’s all of you! Times haven’t changed much, eh?</p>

<h2 id="creating-mips-in-mips">Creating “MIPS” (in MIPS)</h2>

<p>Here, we won’t create Centipede. No no. We will create MIPS: Millipede Infraction Protection
Simulator. You see, we are designing a simulation for a robot that eradicates the millipedes
from our garden. That’s very different from centipedes. More legs n’at.</p>

<p>Simply, we will create a game where the player controls this robot. The bot will be able
to fire projectiles toward the millipede. Each time the millipede is struck, it will shrink.
When the last segment is gone, the millipede ceases to threaten our garden (and let’s just
say it is magically transported away) and we win!</p>

<p>We will, naturally, write our program entirely in MIPS assembly. To aid us, we will, of course,
make use of the system calls available to us via our MARS simulator. Furthermore, we will be
using the provided LED display. You can find this under <strong>Tools</strong>/<strong>Keypad and LED Display Simulator</strong>
in the MARS menu bar.</p>

<p>There are several pieces of code and logic we will be making use of, and will be described in
detail further down this document:</p>

<ul>
  <li>Random Numbers (looked at in Lab 4)</li>
  <li>Input Polling (Involving bitmasking, and will be provided to you)</li>
  <li>LED Device (Memory mapped hardware, code to interact with this is provided)</li>
</ul>

<p>The rest will be good ol’-fashioned programming. (emphasis on ol’-fashioned)</p>

<h2 id="the-game-design">The Game Design</h2>

<h3 id="millipede">Millipede</h3>

<p>The MIPS game will be very inspired by the basic Centipede mechanics. There will be a, *ahem*,
<em>millipede</em> that will navigate through the level. The level itself will be a two-dimensional
grid made up of single pixels. The millipede will have a particular length (10) while being a single
pixel wide and move left to right across the board.</p>

<p>It will start with its tail to the top-left
and its head toward the right and move to the right until it encounters either an obstacle or
the boundary of the level. When it encounters a collision, it will move down (ignoring anything
in its path) and change direction. Each segment of the millipede will simply move by occupying
the space of its adjacent segment, exactly in the manner of the original game.</p>

<p>When the millipede reaches the bottom and can no longer move down when it decides it needs to
do so, it will instead be moved to its initial starting point (top-left) while retaining its
current size. It will then move to the right under the same rules.</p>

<h3 id="level-obstacles">Level Obstacles</h3>

<p>The level will be a 32 by 32 grid. At least 40 or so Mushrooms will be randomly placed within the field. The
millipede nor the player can move into a space occupied by a mushroom. Once every second, a
new mushroom at a random location is generated.</p>

<p>You do not have to be rigorous about ensuring that the random location is an empty space. That
is, if you randomly select a location that already has a player, millipede, or mushroom, then
you can simply do nothing and wait for the next second to pass.</p>

<h3 id="player-movement">Player Movement</h3>

<p>The player is a single pixel that can move in any normal direction (up, down, left, right.)
The player cannot move through a mushroom. The player is bounded by the level and stops when
the player collides with the edges of the screen.</p>

<p>If the player intersects the millipede (or is collided with by the millipede), the player
loses.</p>

<h3 id="projectiles">Projectiles</h3>

<p>There can only be one projectile on the screen at a time. The player fires a projectile with
the “fire” key (the b key) which creates a projectile directly one pixel above the player.
This projectile moves upward at any speed you desire as long as its movement is noticable
(it is not an instaneous laser) and faster than the player itself.</p>

<p>When the projectile hits a mushroom, that mushroom is destroyed and the projectile is also
destroyed. This allows the player to fire again.</p>

<p>When the projectile hits the millipede, the length of the millipede is shorted by one. If
the millipede’s length is equal to one when struck, the player wins. The projectile is
destroyed and the player is able to fire again.</p>

<p>When the projectile hits the top boundary of the level, the projectile is unceremoniously
destroyed, allowing the player to fire again.</p>

<p>Otherwise, the projectile moves upward and the player cannot fire a second projectile until
a collision occurs.</p>

<h3 id="other-considerations">Other Considerations</h3>

<p>You may make the color of any element (millipede, mushroom, player, and projectile) any color
you wish as long as none are the same color. I find that red for the millipede, blue for the
player, green for a mushroom, and yellow/orange for the projectile works well. But, you may
experiment.</p>

<h3 id="losing">Losing</h3>

<p>When the millipede collides with the player (or the player collides with the millipede), the
game will end and the player will lose.</p>

<h3 id="winning">Winning</h3>

<p>When the millipede ceases to exist because the player hit each segment of the millipede, and
at the point that the player hits the last remaining segment, the player wins.</p>

<h2 id="helpful-tidbits">Helpful Tidbits</h2>

<h3 id="random-numbers">Random Numbers</h3>

<p>See <a href="/cs447/labs/04">Lab 4</a> Part A.</p>

<h3 id="led-display">LED Display</h3>

<p>See <a href="/cs447/labs/05">Lab 5</a> Part B.</p>

<h3 id="game-loop">Game Loop</h3>

<p>Our game loop will be an infinite loop that periodically checks for updated inputs (button
presses) and also periodically updates our game’s state.</p>

<p>Every 100ms (1 tenth of a second), it will adjust the current frame. It will move
characters and projectiles around and check for win or loss conditions. Our <code class="highlighter-rouge">update</code> function
likely calls several other <code class="highlighter-rouge">update</code> functions for each game object (millipede, player, projectile,
etc.)</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">last</span> <span class="o">=</span> <span class="n">getSystemTime</span><span class="p">()</span>
<span class="k">while</span> <span class="kp">true</span>
  <span class="n">handleInput</span><span class="p">()</span>

  <span class="n">time</span> <span class="o">=</span> <span class="n">getSystemTime</span><span class="p">()</span>

  <span class="c1"># Get elapsed time since our last update in milliseconds</span>
  <span class="n">elapsed</span> <span class="o">=</span> <span class="n">time</span> <span class="o">-</span> <span class="n">last</span>

  <span class="c1"># Each of our frames will be 100ms</span>
  <span class="c1"># That means, we are running at 10 frames per second</span>
  <span class="c1"># (more or less)</span>
  <span class="k">if</span> <span class="n">elapsed</span> <span class="o">&gt;</span> <span class="mi">100</span>
    <span class="c1"># We won't worry too much about missed</span>
    <span class="c1"># frames or elongated frames</span>
    <span class="n">last</span> <span class="o">=</span> <span class="n">time</span>
    <span class="n">update</span><span class="p">()</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<h3 id="input-handling">Input Handling</h3>

<p>Our game loop has a <code class="highlighter-rouge">handleInput</code> function.
Here, we will look at our hardware to detect whether or not an input was pressed.
For this type of game, we can simply modify a variable for each direction and the
one “action” button.</p>

<p>The code to handle input will be provided to you.</p>

<p>Check out this simple LED input handling program (which also exhibits a game loop!):
<a href="/cs447/examples/simple_led_input.asm">simple_led_input.asm</a></p>

<h3 id="millipede-movement">Millipede Movement</h3>

<p>Here are some helpful diagrams to depict how the millipede movement works. The normal movement of the millipede, colored red here, when it encounters the level boundary.</p>

<p><img src="/cs447/projects/01/millipede_0.svg" alt="" /></p>

<p><img src="/cs447/projects/01/millipede_1.svg" alt="" /></p>

<p><img src="/cs447/projects/01/millipede_2.svg" alt="" /></p>

<p><img src="/cs447/projects/01/millipede_3.svg" alt="" /></p>

<p>When it hits a “mushroom”, indicated here in green.</p>

<p><img src="/cs447/projects/01/millipede_mushroom_0.svg" alt="" /></p>

<p><img src="/cs447/projects/01/millipede_mushroom_1.svg" alt="" /></p>

<p><img src="/cs447/projects/01/millipede_mushroom_2.svg" alt="" /></p>

<p>When it hits a “mushroom”, indicated here in green, and there is a mushroom below. Just ignore that mushroom.</p>

<p><img src="/cs447/projects/01/millipede_mushroom_4.svg" alt="" /></p>

<p><img src="/cs447/projects/01/millipede_mushroom_3.svg" alt="" /></p>

<p><img src="/cs447/projects/01/millipede_mushroom_2.svg" alt="" /></p>

<p><img src="/cs447/projects/01/millipede_mushroom_4.svg" alt="" /></p>

<h2 id="project-stages">Project Stages</h2>

<p>In order to help you we aware of your progress, I will recommend a series of mile markers to
help you divide up the work. You can, of course, ignore these if you wish. However, if you
find you need some direction, by all means follow along.</p>

<p>You have over four weeks
to complete this project, and I’ve divided this into four stages. You could consider
accomplishing each stage for each week. (Or do everything in the last three days at your own
peril! :)</p>

<h3 id="stage-1---millipede-movement">Stage 1 - Millipede Movement</h3>

<p>Draw the millipede with a length of 10. Starting at the top left and moving initially to the
right. We don’t have any level obstacles, so just make it go from the top-left to bottom following
the normal millipede rules outlined above in the Millipede section of the game design portion.</p>

<p>Ensure that it, when it reaches the bottom, resets to the top-left. It will basically move right
and left until reaching a bottom corner. And then resetting to the top-left and doing the exact
same thing.</p>

<p>This stage involves establishing memory variables to keep track of the millipede. Which is some
array of coordinates. Moving the millipede involves figuring out where the next segment goes
and adjusting each segment as it moves.</p>

<h3 id="stage-2---level-generation">Stage 2 - Level Generation</h3>

<p>With your millipede in place, add some obstacles. Here, you will introduce a random element.
As a hint, you will likely want a function somewhere that can add a random mushroom to the
playing field, and then call that within a loop a certain number of times. It is here that you
can also add the ability to periodically generate new mushrooms according to the rules found
within the Level Obstacles section of the game design portion above.</p>

<p>Ensure that your millipede now navigates the obstacles appropriately. It is completely fine
if the millipede goes through a mushroom <strong>as it moves down</strong> since it would be difficult to
determine what behavior it should have in this case. Let’s just koolaid-man it for that
particular situation (ignore level collisions when moving millipede down).</p>

<p><strong>Hint</strong>: You don’t need any variables to remember where the mushrooms are. Why is that?</p>

<h3 id="stage-3---player-movement-and-controls">Stage 3 - Player Movement and Controls</h3>

<p>With our basic enemy movement and level generation done, this is when I would recommend
worrying about the player. Add a player, and also variables that pertain to the player.
We also need to add input handling. When the “left” key is down, move the player left. Similarly
handle “up”, “down”, and “right”. Ensure that the player cannot move into a mushroom.
Also, add your lose condition when the player or millipede collide with each other.</p>

<p>Since we do not have projectiles, we don’t have a way of clearing the mushrooms. So we might
get stuck, randomly. That’s ok! You’ll get to that.</p>

<h3 id="stage-4---projectiles-and-win-condition">Stage 4 - Projectiles and Win-Condition</h3>

<p>Now… we get to our win condition. We will worry about only a single projectile at a time.
According to our game design above, we only fire when there isn’t already an existing projectile
visible on the screen. Very classic arcade rules!</p>

<p>Obviously, handle the “fire” input key (the ‘b’ key, oddly) to create a projectile above the
player.</p>

<p>Our projectile then travels upward. Handle the collision with mushrooms by destroying both mushroom
and projectile (allowing the player to fire again)</p>

<p>Then, handle the collision with the millipede by shortening the millipede (what’s a good way of
doing that? There are a couple of choices. I’ll let you decide.)</p>

<p>Finally, handle the win condition. When the projectile hits a single length millipede… you win!</p>

<h3 id="rubric">Rubric</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Documentation:

- Name included in source code
- Any bugs described
- Code commented reasonably enough

Millipede:

- Drawn correctly
- Moves in a particular direction automatically
- Handles hitting the level boundary and reversing direction
- Handles hitting a "mushroom" and reversing direction
- Handles hitting bottom corner

Player:

- Drawn correctly
- Moves through the input keys
- Cannot pass through level boundary
- Cannot pass through mushrooms

Mushrooms:

- Spawn randomly at start
- Spawn randomly at some reasonable interval (1 second recommended)

Projectiles:

- Spawn above player when action key pressed
- Drawn (in a distinguishing color)
- Move upward correctly
- Destroy mushroom upon hitting one (and then projectile disappears)
- Destroys a segment of the millipede upon collision
- Can only shoot one at a time

Gameplay:

- Win condition displayed when millipede size goes to 0
- Lose condition displayed when millipede and player collide

Extra Credit:

- Up to 5 points for any extra feature that is well described and commented
</code></pre></div></div>

<h3 id="submission">Submission</h3>

<p>Submit your project zipped up as <code class="highlighter-rouge">dww9_project1.zip</code> or similar with your own username.</p>


      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/cs447/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">CS 447</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">CS 447</li><li><a class="u-email" href="mailto:dwilk@cs.pitt.edu">dwilk@cs.pitt.edu</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/wilkie"><svg class="svg-icon"><use xlink:href="/cs447/assets/minima-social-icons.svg#github"></use></svg> <span class="username">wilkie</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>CS 447 (26147);
T-Th 9:30AM;
123 Victoria
</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
